'use strict';window.addEventListener("load",elements_listener());function get_cookie(a){return(a=document.cookie.match(new RegExp("(?:^|; )"+a.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)")))?decodeURIComponent(a[1]):void 0}async function elements_listener(){let a=document.getElementById("Save");a&&a.addEventListener("click",get_pdf_document)}
async function get_pdf_document(){var a=document.getElementById("ExternalCode"),c=null,b=null;a&&(c=a.getAttribute("data-external-code"),b=a.getAttribute("data-date-create"));c&&(a=`http://62.133.174.3:8081/UT_RZM/hs/api?metod=getCustomerDocuments&document_code=${c}&document_type=0`,b&&(a+=`&date_document=${b}`),b={method:"GET",headers:{"Content-Type":"application/json;charset=utf-8","X-Requested-With":"XMLHttpRequest","X-CSRFToken":get_cookie("csrftoken"),Request1C:encodeURI(a)}},b=await fetch("/shop/api/v1/proxy_request/",
b),b.ok||401==b.status?null===b.headers.get("Content-Disposition")?(c=await b.json(),0===Object.keys(c).length&&console.log("\u041f\u0443\u0441\u0442\u043e\u0439 \u043e\u0442\u0432\u0435\u0442 \u043f\u0440\u0438 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0438 PDF \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u043e\u0432")):(b=await b.blob(),b=URL.createObjectURL(b),a=document.createElement("a"),a.href=b,a.download=`${c}.pdf`,a.target="_blank",a.click(),URL.revokeObjectURL(b)):console.log(`\u041e\u0448\u0438\u0431\u043a\u0430 HTTP get_pdf_document: ${b.status}`))}